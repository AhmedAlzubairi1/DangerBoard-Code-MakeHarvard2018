#include <MMA7660.h>

// Credit @mcauser on github for te MMA7760 accelerometer library

#include <Wire.h>
#include "MMA7660.h"
MMA7660 acc;

void setup()
{
    acc.init();
    pinMode(13, OUTPUT);
    Serial.begin(115200);
}

void loop()
{

    static long cnt     = 0;
    static long cntout  = 0;
    float ax,ay,az;
    float ax1, ay1, az1;
    int8_t x, y, z;
    int8_t vx, vy, vz;

     vx = 0;
     vy = 0;
     vz = 0;

    acc.getXYZ(&x,&y,&z);

    Serial.print("x = ");
    Serial.println(x);
    Serial.print("y = ");
    Serial.println(y);
    Serial.print("z = ");
    Serial.println(z);


    if(acc.getAcceleration(&ax,&ay,&az))
    {
        Serial.print("get data ok: ");
    }
    else
    {
        Serial.print("tiem out: ");
    }

    vx = .05 * (ax1 + ax)/20.0;
    vy = .05 * (ay1 + ay)/20.0;
    vz = .05 * (az1 + az)/20.0;
    
    
    Serial.print(vx);
    Serial.print(vy);
    Serial.print(vz);
    Serial.println();

    ax1 = ax;
    ay1 = ay;
    az1 = az;
    delay(25);

}
